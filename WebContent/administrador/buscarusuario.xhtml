<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
	<title>CensoHGP | Buscar Usuário</title>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport"
		content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<!-- Bootstrap CSS -->
	<h:outputStylesheet library="css" name="bootstrap.min.css" />
	<h:outputStylesheet name="primeicons/primeicons.css"
		library="primefaces" />
	<!-- Costumize CSS -->
	<h:outputStylesheet library="css" name="template.css" />
	<h:outputStylesheet library="css" name="consulta.css" />
	<h:outputStylesheet library="css" name="datatable.css" />
	<link rel="shortcut icon" type="image/x-icon"
		href="#{resource['images/favicon.ico']}" />
</h:head>
<h:body>
	<p:sidebar widgetVar="sidebar1" baseZIndex="10000" id="sidebar"
		class="bg-dark mt-0 text-white wrapper">
		<div class="bg-dark mt-0 text-white wrapper" id="sidebar">
			<nav id="sidebar">
			<div class="sidebar-header ">
				<h3 class="font-weight-bold">Menu</h3>
			</div>
			<ul class="list-unstyled components">
				<h:form>
					<h:panelGrid columns="2">
						<h:graphicImage class="ml-2 pb-3 mr-2" width="30px"
							library="images" name="usu.png" />

						<h:outputLabel value=" #{templateController.usuarioLogado.nome}"
							class="font-weight-bold mb-3" />

					</h:panelGrid>
					<li><a href="index.xhtml">Início</a></li>
					<li class="active"><a href="buscarusuario.xhtml"
						data-toggle="collapse" aria-expanded="false">Gerenciar
							Usuários</a></li>
					<li><a href="buscardepartamento.xhtml">Gerenciar
							Departamentos</a></li>
					<li><a href="buscarpaciente.xhtml">Gerenciar Pacientes</a></li>
					<li><a href="transferencia.xhtml">Transferir Paciente</a></li>
					<li><a href="perfil.xhtml">Alterar Senha</a></li>
					<li><h:commandLink value="Sair"
							action="#{templateController.encerrarSessao}" class="nav-link" /></li>
				</h:form>
			</ul>
			</nav>
		</div>
	</p:sidebar>


	<table width="100%">
		<tr>
			<td colspan="2" align="center" class="mar"><ui:insert
					name="cabecalho">
					<h:form>
						<div class="navbar navbar-dark bg-navbar navbar-expand">
							<div class="container collapse navbar-collapse">
								<p:commandLink oncomplete="PF('sidebar1').show()"
									styleClass="mx-3 pt-1 button-menu">
									<span><i class="pi pi-bars"
										style="font-size: 2.5em; color: #fff;"></i></span>
								</p:commandLink>
								<div class="navbar-brand font-weight-bold ">CensoHGP</div>
								<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
									<li class="nav-item"><a href="cadastrousuario.xhtml"
										class="nav-link">Cadastrar Usuário </a></li>
								</ul>
							</div>
						</div>
					</h:form>
				</ui:insert></td>
		</tr>
		<tr>

			<td valign="top"
				class="pt-5  content active mar d-flex justify-content-center">

				<ui:insert name="conteudo">
					<h:form id="formPrincipal">
					
						<div class="border-left mb-4 ml-3">
							<h4 class="ml-3 py-2 font-weight-bold">Consultar Usuários</h4>
						</div>
						<h:panelGrid columns="1"
							class="container d-flex justify-content-center">
							<h:panelGrid columns="10" class="mb-2">
								<div>
									<h:inputText value="#{buscarUsuarioController.nome}"
										styleClass="form-control d-flex" size="40">
										<f:passThroughAttribute name="placeholder"
											value="Digite o nome do usuário" />
									</h:inputText>
								</div>

								<div class="pl-2">
									<h:inputText value="#{buscarUsuarioController.matricula}"
										styleClass="form-control pr-3 d-flex " size="40"
										marin-left="10">
										<f:passThroughAttribute name="placeholder"
											value="Digite o número da matrícula " />
									</h:inputText>
								</div>

								<div>
									<h:commandButton value="Buscar"
										actionListener="#{buscarUsuarioController.buscar()}"
										class="btn btn-azul mr-2 ml-2">
										<f:ajax render="@all" execute="@form" resetValues="true" />
									</h:commandButton>
								</div>

								<div>
									<h:commandButton value="Limpar"
										action="#{buscarUsuarioController.limpar()}"
										class="btn btn-amarelo ">
										<f:ajax render="@form" execute="@this" />
									</h:commandButton>
								</div>

								<div>
									<h:commandButton value="Cadastrar"
											action="cadastrousuario.xhtml"
											class="ml-2 btn btn-verde">
											<f:ajax render="@form" execute="@this" />

										</h:commandButton>
								</div>


							</h:panelGrid>

							<h:panelGrid columns="7">
								<p:dataTable value="#{buscarUsuarioController.listaUsuario}"
									var="obj" rows="5" styleClass="table" paginator="true"
									resizableColumns="true"
									style="margin-bottom:20px; font-size:15px;"
									emptyMessage="Nenhum registro." paginatorAlwaysVisible="false"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} encontrados"
									rowsPerPageTemplate="5,10,15">

									<p:column width="100px">
										<f:facet name="header">Nome</f:facet>
										<h:outputText value="#{obj.nome}"
											class="d-flex justify-content-center">
										</h:outputText>
									</p:column>

									<p:column>
										<f:facet name="header">Matrícula</f:facet>
										<h:outputText value="#{obj.matricula}"
											class="d-flex justify-content-center">
										</h:outputText>
									</p:column>

									<p:column>
										<f:facet name="header">E-mail</f:facet>
										<h:outputText value="#{obj.email}"
											class="d-flex justify-content-center" />
									</p:column>

									<p:column>
										<f:facet name="header">Status</f:facet>
										<h:outputText value="#{obj.ativo ? 'Ativo' : 'Inativo'}"
											class="d-flex justify-content-center" />
									</p:column>


									<p:column style="width:50px">
										<f:facet name="header">Editar</f:facet>
										<h:commandLink
											action="#{buscarUsuarioController.editar(obj.id)}"
											class="d-flex justify-content-center">
											<h:graphicImage style="width: 25px" library="images"
												value="editar" name="botao_editar.png" />
											<f:ajax execute="formPrincipal:dataTable"
												render="formPrincipal" />
										</h:commandLink>
									</p:column>

									<p:column style="width:70px">
										<f:facet name="header">Desativar</f:facet>
										<h:commandLink
											action="#{buscarUsuarioController.excluir(obj.id)}"
											class="d-flex justify-content-center">
											<h:graphicImage style="width: 25px" library="images"
												value="desativar" name="shutdown.png" />
											<f:ajax render="formPrincipal" execute="panelPrincipal"
														resetValues="true" />
										</h:commandLink>

									</p:column>


								</p:dataTable>


							</h:panelGrid>

						</h:panelGrid>
						<p:growl id="growl" showDetail="true" life="5000" />
					</h:form>
				</ui:insert>
			</td>
		</tr>
	</table>

	<div class="box footer pt-4 font-weight-lighter "
		style="text-align: center;">
		<h:outputText value="2020 - Todos os direitos reservados." />
	</div>

	<script>
		function goBack() {
			window.history.back();
		}
	</script>
</h:body>
</html>